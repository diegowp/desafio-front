jQuery(document).ready(function(e){var a={combo_cities:function(){var a=e("#estados"),t=e("#cidades");e.ajax({url:"js/estados_cidades.json",type:"GET",dataType:"json",success:function(o){e.each(o,function(t,o){e("optgroup",a).append('<option value="'+o.nome+'">'+o.nome+"</option>")}),a.change(function(s){var r=e("option:selected",a).val();t.empty(),t.append('<option value=". . .">. . .</option>'),e.each(o,function(a,o){r==o.nome&&e.each(o.cidades,function(e,a){t.append('<option value="'+a+'">'+a+"</option>")})})})}})},getCityInfo:function(){var t=e("#cidades");t.change(function(o){var s=e("option:selected",t).val();a.requestCityInfo(s)})},requestCityInfo:function(t){e.ajax({url:"json_api/"+t+".json",type:"GET",dataType:"json",success:function(t){if(0==t.query.count)e("span#messages").show(),e("#messages").html("Não foi possível recuperar as informações sobre a região!");else{e("span#messages").hide(),e(".for-weekend-wrapper p").html("");var o=t.query.results.channel,s=[];s.title=o.title,s.chill=a.convertToCelsius(o.wind.chill),s.direction=o.wind.direction,s.speed=a.convertToKm(o.wind.speed),s.humidity=o.atmosphere.humidity,s.visibility=a.convertToKm(o.atmosphere.visibility);for(var r=0;r<=7;r++)s["dias "+r]=[o.item.forecast[r].date,o.item.forecast[r].day,a.convertToCelsius(o.item.forecast[r].high),a.convertToCelsius(o.item.forecast[r].low),o.item.forecast[r].text];a.assignFields(s),a.weekend(s),a.createChart(s)}},error:function(){e("#messages").html("Ops, ocorreu um erro inesperado! Não foi possível recuperar as informações sobre essa cidade."),e("#messages").addClass("show")}})},assignFields:function(a){e(".cls").html(""),e(".local").html(a.title),e(".data").html(a["dias 1"][0]),e(".situacao").html(a["dias 1"][4]+" - "),e(".clima-max").html("Max: "+a["dias 1"][2]+"ºc"),e(".clima-min").html("Min: "+a["dias 1"][3]+"ºc"),e(".vento-umidade").html("Umidade do ar: "+a.humidity+"%"),e(".vento-velocidade").html("Velocidade do vento: "+a.speed+" km/h"),e(".vento-visibilidade").html("Visibilidade: "+a.visibility+" km");var t=e("#semana");t.html('<ul class="semana-list"></ul>'),semanaList=e(".semana-list",t);for(var o=0;o<=7;o++)semanaList.append("<li>"+a["dias "+o][1]+" <br/> Max: "+a["dias "+o][2]+"ºc <br/> Min: "+a["dias "+o][3]+"ºc </li>");this.weatherCases(a["dias 1"])},weekend:function(e){for(var a=0;a<=7;a++){if("Sat"==e["dias "+a][1])var t=e["dias "+a];if("Sun"==e["dias "+a][1])var o=e["dias "+a]}this.weatherCases(t),this.weatherCases(o)},weatherCases:function(a){var t="",o="",s="";switch(console.log(a),"Sat"==a[1]?(s=a[0].split(" "),t=e(".for-weekend-wrapper p"),o="Para esse Sabádo dia "+s[0]+", teremos um dia "):"Sun"==a[1]?(s=a[0].split(" "),t=e(".for-weekend-wrapper p"),o="Para esse Domingo dia "+s[0]+", teremos um dia "):"Sat"!==a[1]&&"Sun"!==a[1]&&(t=e(".situacao"),o="Hoje teremos um dia "),a[4]){case"Tropical Storm":text="com Tempestades tropicais. Não esqueça de sair acompanhando de um guarda-chuvas.<br/><br/>",t.append(text);break;case"Thunderstorms":text=o+"com Trovoadas. Evite a manipulação de equipamentos que conduzam eletricidade e procure um local seguro para se abrigar.<br/><br/>",t.append(text);break;case"Drizzle":text=o+"com Garoa. Talvez assistir um Netflix seja uma boa opção =)<br/><br/>",t.append(text);break;case"Hail":text=o+"com Granizo. Grandes chances de chuvas de granizo, evite locais abertos e procure um lugar seguro para se abrigar.<br/><br/>",t.append(text);break;case"Dust":text=o+"com Tempo seco. Mantenha o corpo hidratado, e evite ficar muito tempo expoosto ao Sol.<br/><br/>",t.append(text);break;case"Foggy":text=o+"com Neblina. Muito cuidado nas estradas, neblina requer atenção dobrada.<br/><br/>",t.append(text);break;case"Windy":text=o+"com Ventania. Evite locais com muitas árvores. Caso seja pego de surpresa, procure um local seguro para se abrigar.<br/><br/>",t.append(text);break;case"Cloudy":text=o+"Nublado. Se for sair, talvez seja bom levar um guarda-chuvas =) <br/><br/>",t.append(text);break;case"Cold":text=o+"Frio. Hora de tirar o casaco do guard-roupas, Talvez um cinema ou uma boa bebida quente em casa seja uma opção =).<br/><br/>",t.append(text);break;case"Mostly Cloudy":text=o+"Predominantemente nublado. Se for sair, talvez seja bom levar um guarda-chuvas =) <br/><br/>",t.append(text);break;case"Partly Cloudy":text=o+"Parcialmente nublado. O dia não será tão bonito, sair com um guarda-chuvas é boa idéia.<br/<br/>",t.append(text);break;case"Mixed Rain and Hail":text=o+"com Chuva com granizo. Evite ficar em locais abertos.<br/><br/>",t.append(text);break;case"Hot":text=o+"Quente. Beba bastante água e evite a exposição ao Sol em excesso no período das 11h às 15h.<br/><br/>",t.append(text);break;case"Sunny":text=o+"Ensolarado. Beba bastante água e aproveite esse belo dia para conhecer os parques de sua cidade =)<br/><br/>",t.append(text);break;case"Isolated Thunderstorms":text=o+"com Tempestades isoladas. Não esqueça de levar o seu guarda-chuvas.<br/><br/>",t.append(text);break;case"Scattered Thunderstorms":text=o+"com Tempestades dispersas. Não esqueça de levar o seu guarda-chuvas.<br/><br/>",t.append(text);break;case"Scattered Showers":text=o+"com Chuvas dispersas. Não esqueça de levar o seu guarda-chuvas.<br/><br/>",t.append(text);break;case"Rain":text=o+"com Tempestades dispersas. Não esqueça de levar o seu guarda-chuvas.<br/><br/>",t.append(text);break;default:text="Ops! Ocorreu algum erro inesperado.<br/><br/>",t.append(text)}},createChart:function(e){for(var a=[],t=[],o=document.getElementById("chart"),s=0;s<=7;s++){e["dias "+s][0].split(" ");a[s]=e["dias "+s][1],t[s]=e["dias "+s][2]}var r={labels:a,datasets:[{label:"Previsão para a semana",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:t,spanGaps:!1}]};Chart.defaults.global.responsive=!0;new Chart(o,{type:"line",data:r,options:{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},setFavorite:function(){e(".favorito").click(function(t){if(t.preventDefault(),a.getLocalStorage())a.deleteLocalStorage(),e("i",this).removeClass("fa-star"),e("i",this).addClass("fa-star-o");else{var o=e("#cidades"),s=e("option:selected",o).val();s?(e("span#messages").hide(),a.setLocalStorage(s),e("i",this).removeClass("fa-star-o"),e("i",this).addClass("fa-star")):(e("span#messages").html("Nenhuma cidade selecionada"),e("span#messages").show())}})},defaultValues:function(){if(this.getLocalStorage()){var a=e(".favorito");e("i",a).removeClass("fa-star-o"),e("i",a).addClass("fa-star"),e("#cidades").append('<option value="'+this.getLocalStorage()+'">'+this.getLocalStorage()+"</option>"),this.requestCityInfo(this.getLocalStorage())}else this.requestCityInfo("Blumenau"),e("#cidades").append('<option value="Blumenau">Blumenau</option>')},convertToCelsius:function(e){return((e-32)/1.8).toFixed(0)},convertToKm:function(e){return(1.609*e).toFixed(2)},setLocalStorage:function(e){return localStorage.setItem("cidade",e)},getLocalStorage:function(){return localStorage.getItem("cidade")},deleteLocalStorage:function(){return localStorage.removeItem("cidade")},init:function(){this.combo_cities(),this.getCityInfo(),this.setFavorite(),this.defaultValues()}};a.init()});
//# sourceMappingURL=main.min.js.map
